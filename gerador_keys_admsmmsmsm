<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Death Store - Painel Admin</title>

<style>
body {
  background: radial-gradient(circle at top, #12001f, #05000a);
  color: #fff;
  font-family: Arial, sans-serif;
  min-height: 100vh;
  padding: 30px;
}
h1 {
  color: #b84cff;
  text-shadow: 0 0 15px #7a00ff;
  text-align: center;
}
input {
  padding: 10px;
  border-radius: 8px;
  border: none;
  margin: 5px;
  text-align: center;
}
button {
  background: linear-gradient(135deg, #7a00ff, #b84cff);
  border: none;
  padding: 10px 18px;
  border-radius: 10px;
  color: white;
  cursor: pointer;
  margin: 5px;
}
button.red {
  background: linear-gradient(135deg, #ff004c, #ff6b6b);
}
.container {
  max-width: 800px;
  margin: auto;
  text-align: center;
}
.key {
  background: #200030;
  padding: 12px;
  border-radius: 8px;
  margin-top: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}
.hidden { display: none; }
</style>
</head>

<body>

<h1>ğŸ” Death Store â€” Painel Admin</h1>

<div id="login" class="container">
  <p>Digite a senha de administrador</p>
  <input type="password" id="senha" placeholder="Senha">
  <br>
  <button onclick="entrar()">Entrar</button>
  <p id="erro" style="color:red;"></p>
</div>

<div id="painel" class="container hidden">
  <h2>Gerenciamento de Keys</h2>

  <button onclick="gerarKey()">â• Gerar Nova Key</button>
  <button onclick="exportar()">ğŸ“¦ Exportar Keys</button>
  <input type="file" id="importar" onchange="importarKeys(event)">
  <button class="red" onclick="limparTudo()">ğŸ—‘ Apagar Todas</button>

  <div id="lista"></div>
</div>

<script>
const SENHA_ADMIN = "4030";

function entrar() {
  if (document.getElementById("senha").value === SENHA_ADMIN) {
    document.getElementById("login").classList.add("hidden");
    document.getElementById("painel").classList.remove("hidden");
    render();
  } else {
    document.getElementById("erro").innerText = "Senha incorreta!";
  }
}

function gerarKey() {
  const key = "DEATH-" +
    Math.random().toString(36).substring(2,6).toUpperCase() +
    "-" +
    Math.random().toString(36).substring(2,6).toUpperCase();

  let keys = JSON.parse(localStorage.getItem("GERADOR_KEYS")) || [];
  keys.push({ key, usada: false });
  localStorage.setItem("GERADOR_KEYS", JSON.stringify(keys));
  render();
}

function resetarKey(k) {
  let keys = JSON.parse(localStorage.getItem("GERADOR_KEYS")) || [];
  keys = keys.map(x => x.key === k ? { key: x.key, usada: false } : x);
  localStorage.setItem("GERADOR_KEYS", JSON.stringify(keys));
  render();
}

function apagarKey(k) {
  let keys = JSON.parse(localStorage.getItem("GERADOR_KEYS")) || [];
  keys = keys.filter(x => x.key !== k);
  localStorage.setItem("GERADOR_KEYS", JSON.stringify(keys));
  render();
}

function limparTudo() {
  if (confirm("Apagar TODAS as keys?")) {
    localStorage.removeItem("GERADOR_KEYS");
    render();
  }
}

function exportar() {
  const data = localStorage.getItem("GERADOR_KEYS") || "[]";
  const blob = new Blob([data], { type: "application/json" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "keys_death_store.json";
  a.click();
}

function importarKeys(event) {
  const file = event.target.files[0];
  const reader = new FileReader();
  reader.onload = e => {
    localStorage.setItem("GERADOR_KEYS", e.target.result);
    render();
  };
  reader.readAsText(file);
}

function render() {
  const lista = document.getElementById("lista");
  const keys = JSON.parse(localStorage.getItem("GERADOR_KEYS")) || [];
  lista.innerHTML = "";

  if (keys.length === 0) {
    lista.innerHTML = "<p>Nenhuma key criada.</p>";
    return;
  }

  keys.forEach(k => {
    const div = document.createElement("div");
    div.className = "key";
    div.innerHTML = `
      <span>${k.key}</span>
      <span>${k.usada ? "âŒ Usada" : "âœ… Livre"}</span>
      <button onclick="resetarKey('${k.key}')">ğŸ” Resetar</button>
      <button class="red" onclick="apagarKey('${k.key}')">ğŸ—‘</button>
    `;
    lista.appendChild(div);
  });
}
</script>

</body>
</html>
